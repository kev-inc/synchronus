(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"V+x3":function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=u("ZZ/e"),o=function(){function l(l,n){this.navCtrl=l,this.route=n,this.room=""}return l.prototype.ngOnInit=function(){this.room=this.route.snapshot.paramMap.get("id")},l.prototype.gotoPeoplePage=function(){this.navCtrl.navigateForward("/room/"+this.room+"/people")},l.prototype.saveRoom=function(){if("undefined"!=typeof Storage){console.log(localStorage.saved);var l=void 0;if(null!=localStorage.saved){var n=(l=JSON.parse(localStorage.saved)).indexOf(this.room);-1==n?(l.push(this.room),alert("Added to saved")):(l.splice(n,1),alert("Removed from saved"))}else(l=[]).push(this.room);localStorage.saved=JSON.stringify(l)}else alert("Your browser does not support local storage")},l}(),r=function(){return function(){}}(),i=u("pMnS"),a=u("oBZk"),c=u("Ip0R"),p=u("AkIE"),b=function(){function l(l){this.navCtrl=l,this.days=[{day:"MON",rows:1},{day:"TUE",rows:1},{day:"WED",rows:1},{day:"THU",rows:1},{day:"FRI",rows:1}],this.times=["800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2100"],this.colors=["#ef5350","#7e57c2","#039be5","#43a047","#ef6c00","#757575","#ec407a","#5c6bc0","#0097a7","#689f38","#ff5722","#78909c","#ab47bc","#42a5f5","#26a69a","#827717","#a1887f"],this.people=[],this.table=[{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]}]}return l.prototype.ngOnInit=function(){var l=this;Object(p.f)(this.room).on("value",function(n){if(null!=n.val()){l.people=[],l.table=[{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]},{800:[],900:[],1000:[],1100:[],1200:[],1300:[],1400:[],1500:[],1600:[],1700:[],1800:[],1900:[],2000:[],2100:[]}];var u=n.val();console.log(u),Object.keys(u).forEach(function(n){l.people.push(n);var t=u[n];Object.keys(t).forEach(function(u){var e,o,r,i,a,c,p,b,s,f;switch(o=+t[u].start,r=+t[u].end,i=t[u].module_code,a=t[u].type.slice(0,3).toUpperCase(),c=t[u].venue,p=t[u].week,b=t[u].hidden,s=t[u].custom,f=u,t[u].day){case"Monday":e=0;break;case"Tuesday":e=1;break;case"Wednesday":e=2;break;case"Thursday":e=3;break;case"Friday":e=4;break;default:e=-1}for(var d=[],h=function(n){var u=[],t=!1;l.table[e][n].map(function(l,n){return u.push(l.row)}),u.sort();for(var o=0;o<u.length;o++)u[o]==o||t||(d.push(o),t=!0);t||d.push(u.length)},m=o;m<r;m+=100)h(m);var x=Math.max.apply(null,d);for(m=o;m<r;m+=100)l.table[e][m].push({module_code:i,day:e,start:o,end:r,type:a,venue:c,person:n,row:x,week:p,hidden:b,custom:s,key:f})})}),console.log(l.table),l.calculateRows(),l.findTile(0,"800",0)}})},l.prototype.getColor=function(l,n,u){var t=this.table[l][n].filter(function(l){return l.row==u});if(0!=t.length){var e=this.people.indexOf(t[0].person);return this.colors[e]}return""},l.prototype.calculateRows=function(){var l=this;this.table.map(function(n,u){var t=1;Object.keys(n).forEach(function(n){l.table[u][n].length>t&&(t=l.table[u][n].length)}),l.days[u].rows=t})},l.prototype.buildArray=function(l){return Array(l)},l.prototype.isTile=function(l,n,u){var t=this.table[l][n].filter(function(l){return l.row==u});return 0==t.length||t[0].start==n},l.prototype.isButton=function(l,n,u){var t=this.table[l][n].filter(function(l){return l.row==u});return 0!=t.length&&t[0].start==n},l.prototype.tileLength=function(l,n,u){var t=this.table[l][n].filter(function(l){return l.row==u});return 0!=t.length?(t[0].end-t[0].start)/100:"1"},l.prototype.findTile=function(l,n,u){var t=this.table[l][n].filter(function(l){return l.row==u});return 0!=t.length?t[0]:""},l.prototype.tileClicked=function(l){this.navCtrl.navigateForward("/room/"+this.room+"/details/"+l.person+"/"+l.key)},l}(),s=t.nb({encapsulation:0,styles:[[".time[_ngcontent-%COMP%]{padding:4px;text-align:left;max-width:108px;min-width:108px}.buttontext[_ngcontent-%COMP%]{font-size:10px}.days[_ngcontent-%COMP%]{max-width:52px;min-width:52px}.divider[_ngcontent-%COMP%]{border-bottom:1px solid gray}.card[_ngcontent-%COMP%]{box-shadow:1px 1px 1px gray;border-radius:5px;color:#fff;font-size:14px;padding-left:4px;margin:4px}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}"]],data:{}});function f(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,2,"td",[],[[8,"colSpan",0]],null,null,null,null)),(l()(),t.pb(1,0,null,null,1,"div",[["class","card"]],[[4,"background-color",null]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.tileClicked(e.findTile(l.parent.parent.context.index,l.parent.context.$implicit,0))&&t),t},null,null)),(l()(),t.Eb(2,null,[" "," "]))],null,function(l,n){var u=n.component;l(n,0,0,u.tileLength(n.parent.parent.context.index,n.parent.context.$implicit,0)),l(n,1,0,u.getColor(n.parent.parent.context.index,n.parent.context.$implicit,0)),l(n,2,0,u.findTile(n.parent.parent.context.index,n.parent.context.$implicit,0).person)})}function d(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,f)),t.ob(2,16384,null,0,c.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(0,null,null,0))],function(l,n){l(n,2,0,n.component.isTile(n.parent.context.index,n.context.$implicit,0))},null)}function h(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,2,"td",[],[[8,"colSpan",0]],null,null,null,null)),(l()(),t.pb(1,0,null,null,1,"div",[["class","card"]],[[4,"background-color",null]],[[null,"click"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.tileClicked(e.findTile(l.parent.parent.parent.context.index,l.parent.context.$implicit,l.parent.parent.context.index+1))&&t),t},null,null)),(l()(),t.Eb(2,null,[" "," "]))],null,function(l,n){var u=n.component;l(n,0,0,u.tileLength(n.parent.parent.parent.context.index,n.parent.context.$implicit,n.parent.parent.context.index+1)),l(n,1,0,u.getColor(n.parent.parent.parent.context.index,n.parent.context.$implicit,n.parent.parent.context.index+1)),l(n,2,0,u.findTile(n.parent.parent.parent.context.index,n.parent.context.$implicit,n.parent.parent.context.index+1).person)})}function m(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,h)),t.ob(2,16384,null,0,c.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(0,null,null,0))],function(l,n){l(n,2,0,n.component.isTile(n.parent.parent.context.index,n.context.$implicit,n.parent.context.index+1))},null)}function x(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,m)),t.ob(2,278528,null,0,c.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.times)},null)}function g(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,9,"tbody",[],null,null,null,null,null)),(l()(),t.pb(1,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t.pb(2,0,null,null,1,"th",[["class","days"]],[[8,"rowSpan",0]],null,null,null,null)),(l()(),t.Eb(3,null,["",""])),(l()(),t.gb(16777216,null,null,1,null,d)),t.ob(5,278528,null,0,c.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.gb(16777216,null,null,1,null,x)),t.ob(7,278528,null,0,c.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.pb(8,0,null,null,1,"tr",[],null,null,null,null,null)),(l()(),t.pb(9,0,null,null,0,"td",[["class","divider"],["colSpan","15"],["height","8px"]],null,null,null,null,null))],function(l,n){var u=n.component;l(n,5,0,u.times),l(n,7,0,u.buildArray(n.context.$implicit.rows-1))},function(l,n){l(n,2,0,t.rb(1,"",n.context.$implicit.rows,"")),l(n,3,0,n.context.$implicit.day)})}function v(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,35,"table",[],null,null,null,null,null)),(l()(),t.pb(1,0,null,null,32,"tbody",[],null,null,null,null,null)),(l()(),t.pb(2,0,null,null,29,"tr",[],null,null,null,null,null)),(l()(),t.pb(3,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),t.pb(4,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["0800"])),(l()(),t.pb(6,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["0900"])),(l()(),t.pb(8,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1000"])),(l()(),t.pb(10,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1100"])),(l()(),t.pb(12,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1200"])),(l()(),t.pb(14,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1300"])),(l()(),t.pb(16,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1400"])),(l()(),t.pb(18,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1500"])),(l()(),t.pb(20,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1600"])),(l()(),t.pb(22,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1700"])),(l()(),t.pb(24,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1800"])),(l()(),t.pb(26,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["1900"])),(l()(),t.pb(28,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["2000"])),(l()(),t.pb(30,0,null,null,1,"th",[["class","time"]],null,null,null,null,null)),(l()(),t.Eb(-1,null,["2100"])),(l()(),t.pb(32,0,null,null,1,"tr",[],null,null,null,null,null)),(l()(),t.pb(33,0,null,null,0,"td",[["class","divider"],["colSpan","15"],["height","8px"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,g)),t.ob(35,278528,null,0,c.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,35,0,n.component.days)},null)}var y=u("ZYCi"),k=t.nb({encapsulation:0,styles:[[""]],data:{}});function w(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,21,"ion-header",[],null,null,null,a.H,a.i)),t.ob(1,49152,null,0,e.z,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,19,"ion-toolbar",[["color","primary"]],null,null,null,a.X,a.y)),t.ob(3,49152,null,0,e.zb,[t.h,t.k],{color:[0,"color"]},null),(l()(),t.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,a.C,a.d)),t.ob(5,49152,null,0,e.j,[t.h,t.k],null,null),(l()(),t.pb(6,0,null,0,2,"ion-back-button",[["defaultHref",""]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.zb(l,8).onClick(u)&&e),e},a.A,a.b)),t.ob(7,49152,null,0,e.e,[t.h,t.k],{defaultHref:[0,"defaultHref"]},null),t.ob(8,16384,null,0,e.f,[[2,e.fb],e.Eb],{defaultHref:[0,"defaultHref"]},null),(l()(),t.pb(9,0,null,0,2,"ion-title",[],null,null,null,a.W,a.x)),t.ob(10,49152,null,0,e.xb,[t.h,t.k],null,null),(l()(),t.Eb(11,0,["",""])),(l()(),t.pb(12,0,null,0,9,"ion-buttons",[["slot","secondary"]],null,null,null,a.C,a.d)),t.ob(13,49152,null,0,e.j,[t.h,t.k],null,null),(l()(),t.pb(14,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.saveRoom()&&t),t},a.B,a.c)),t.ob(15,49152,null,0,e.i,[t.h,t.k],null,null),(l()(),t.pb(16,0,null,0,1,"ion-icon",[["name","star"]],null,null,null,a.I,a.j)),t.ob(17,49152,null,0,e.A,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.pb(18,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.gotoPeoplePage()&&t),t},a.B,a.c)),t.ob(19,49152,null,0,e.i,[t.h,t.k],null,null),(l()(),t.pb(20,0,null,0,1,"ion-icon",[["name","people"]],null,null,null,a.I,a.j)),t.ob(21,49152,null,0,e.A,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.pb(22,0,null,null,3,"ion-content",[["scrollX","true"]],null,null,null,a.F,a.g)),t.ob(23,49152,null,0,e.s,[t.h,t.k],{scrollX:[0,"scrollX"]},null),(l()(),t.pb(24,0,null,0,1,"app-timetable",[],null,null,null,v,s)),t.ob(25,114688,null,0,b,[e.Eb],{room:[0,"room"]},null)],function(l,n){var u=n.component;l(n,3,0,"primary"),l(n,7,0,""),l(n,8,0,""),l(n,17,0,"star"),l(n,21,0,"people"),l(n,23,0,"true"),l(n,25,0,t.rb(1,"",u.room,""))},function(l,n){l(n,11,0,n.component.room)})}function O(l){return t.Fb(0,[(l()(),t.pb(0,0,null,null,1,"app-room",[],null,null,null,w,k)),t.ob(1,114688,null,0,o,[e.Eb,y.a],null,null)],function(l,n){l(n,1,0)},null)}var E=t.lb("app-room",o,O,{},{},[]),F=u("gIcY");u.d(n,"RoomPageModuleNgFactory",function(){return C});var C=t.mb(r,[],function(l){return t.wb([t.xb(512,t.j,t.bb,[[8,[i.a,E]],[3,t.j],t.x]),t.xb(4608,c.k,c.j,[t.u,[2,c.q]]),t.xb(4608,F.g,F.g,[]),t.xb(4608,e.a,e.a,[t.z,t.g]),t.xb(4608,e.Db,e.Db,[e.a,t.j,t.q]),t.xb(4608,e.Gb,e.Gb,[e.a,t.j,t.q]),t.xb(1073742336,c.b,c.b,[]),t.xb(1073742336,F.f,F.f,[]),t.xb(1073742336,F.a,F.a,[]),t.xb(1073742336,e.Bb,e.Bb,[]),t.xb(1073742336,y.o,y.o,[[2,y.u],[2,y.m]]),t.xb(1073742336,r,r,[]),t.xb(1024,y.k,function(){return[[{path:"",component:o}]]},[])])})}}]);